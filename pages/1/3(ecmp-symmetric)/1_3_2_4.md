---
l1idx: 1
l2idx: 3
l3idx: 2
l4idx: 4
title: "Re-Modeling the graph"
permalink: 1_3_2_4.html
summary: "An refined iteration of our 'graph' representation of the reference network"
---

Having further formalized the properties of our nodes and edges, we will now update our undirected graph model of our reference network topology.

## The Node-index property

We start be adding an additional property for nodes in the graph.  The "node-index" property is an integer that must be unique to each node on the graph.  Here, it is a functional stand-in for the autonomous system number (ASN) of a BGP router, as well as all networks that it originates into BGP.

The node index is depicted in the graph in black text, centered in the node.

## The Symmetric Perimeter Zone (SP zone) property

The symmetric perimeter zone property of each node is represented on the graph by the *color* used to depict the node (the shading of the actual circle).  The visual figure of the graph includes a key for mapping each color to an explicit value for the SPZ property of the nodes of that color.

Those values are formatted to reflect the hierarchical nature of the SPN zone structure (as discussed in the previous section), with the addition of an "implicit root" value of 0.  

This implicit root ("0.") does not exist in any "real" sense, but provides namespace headroom for us to contemplate representation of completely disjoint graphs (that is, networks)

### SP zone labels

The color coding of SP zones in the visual representation of the graph is visually convenient, but *is* representative of an actual property of the nodes, the structure of which is as follows:

- Each node has an "SP zone" property consisting of a decimal-point delimited sequence of octets in decimal notation.
- The first octet is always "0", representing the nominal/implicit "root" of the SP zone hierarchy.
- The second octet designates the *instance*-index of the graph-local top/root level of the SP zone hierarchy of which the labeled node is a member.
- The 3rd octet (if present) designates the *instance*-index of the 2nd-level branch of the graph-local SP zone hierarchy of which the node is a member.
- 4th, 5th, etc...  octets represent successively deeper branches in the SP Zone tree.
  - only the first three octets are used in the model presented here.

## The Site Property becomes the "locale" property

## Edge Labels

As so-far constructed here, the "site" property that we are using is somewhat analogous to round-trip-latency.  (The closer to site-root an edge is, the higher the latency of the real-world network connection it represents.)   However, instead of providing a quantitative measurement of latency, it instead provides a measure of "depth in hierarchy."  

Edge labels *also* provide a unique identifier for each fork in the site hierarchy, as well as an indicator of whether the labeled edge is present in one, or in two different levels of the site hierarchy. 

The "site" property of edges is also updated with an implicit "root" at the top of the site hierarchy (also "0").  Similarly to the implicit root of the SPZ hierarchy, this presents on the graph only as a prepended value of "0." to the "site" property of each edge, and exists to provide "headroom" for representation of disjoint site hierarchies.

The implicit root of the site hierarchy is a(n implicit) node, connected to an (implicit) edge that is connected to each site node at the root/top of *our* graph's site hierarchy.

Edge labels are constructed as follows
- Each edge has a "scale" property consisting of a decimal-point delimited sequence of octets in decimal notation.
- The first octet is always "0", representing the nominal/implicit "root" of the SP zone hierarchy.

- Labels are formatted as decimal-point delimited decimal octets, each beginning with "0."
- Each non-zero octet (read left-to-right) represents a level of the site hierarchy
  - E.g.:  In "0.n.m.0", the first "0" represents the implicit root of the site hierarchy, and
    - "n" represents an instance of the graph-local "top"/root level of the site hierarchy (the WAN, in this exercise)
    - "m" represents an instance of the graph-local 2nd-level of the site hierarchy  (one of three workload-hosting sites, in this exercise.)
-  

- All edge labels begin with "0."  ()
  - Edge



...

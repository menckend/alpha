---
l1idx: 1
l2idx: 3
l3idx: 2
l4idx: 1
title: "The Transit Zone"
permalink: 1_3_2_1.html
summary: "Teasing out the hidden topology"
---

This framework relies heavily on the concept of a transit-zone.  That is, a (network security) zone which is tasked exclusively with providing transport for traffic between other zones.  No workload/hosts are attached to this network, only transport nodes.  The "edge"/"perimeter" of this zone is its connection to the firewalls on the perimeter of all the other zones.

### The hidden/implicit transit zone
This "transit zone" is already an implicit element of any multi-zone topology in which multiple zones hang off different interfaces of a single firewall instance.  

Each "zone" of the firewall has a separately maintained rulebase/policy, which is applied as traffic enters/exits its interfaces (interfaces are associated to exactly one zone.)

This suggests the following question: 

``` What "zone" is traffic "in" after it enters a firewall's interface in one zone, but before it exit's another interface of the same firewall?  
```

The answer is that the firewall's internal data-plane is an implicit "transit zone" in that case, as illustrated in the following digram:
{% capture details %}
{% include drawio-embed-addSVG.html drawiolink='./pages/1/3(ecmp-symmetric)/framework-transitzone-1.drawio.svg' drawiozoom='.75' %}
{% endcapture %}
{% capture summary %}Show/hide diagram{% endcapture %}{% include details.html %}

### The multi-VRF implicit transit zone
The preceding diagram illustrates firewalls in which a single routing function exists (all interfaces are in a single routing domain.) In many cases, not only are per-zone policy/rule-bases present on such firewalls, but often per-zone virtual routers are present as well.  That scenario is illustrated here:
{% capture details %}
{% include drawio-embed-addSVG.html drawiolink='./pages/1/3(ecmp-symmetric)/framework-transitzone-2.drawio.svg' drawiozoom='.75' %}
{% endcapture %}
{% capture summary %}Show/hide diagram{% endcapture %}{% include details.html %}

### Implications/insights

The preceding diagram illustrates that multi-zone firewalls are *conceptually* equivalent to multiple zone-specific firewalls in a mesh topology with each other. We will rely on this insight in our anlaysis of desired forwarding behavior in subsequent sections.  It also strongly suggests that we consider whether there is benefit to extending this *implict* transit zone within the firewalls' data planes across the physical network for inter-data-center connectivity.  That scenario is depicted below:

{% capture details %}
{% include drawio-embed-addSVG.html drawiolink='./pages/1/3(ecmp-symmetric)/framework-transitzone-3.drawio.svg' drawiozoom='.75' %}
{% endcapture %}
{% capture summary %}Show/hide diagram{% endcapture %}{% include details.html %}

Extending the transit zone past the edge of the firewall appliances, and all the way across the wide-area network is a substantive change.  At first blush, it seems likely to create more problems than it solves, but it is a crucial element of the emerging framework.  In the meantime though, it solves a pre-existing design inefficiency.  Specifically, without the transit zone extended across the WAN, the network topology introduces an unwanted design constraint for workload placement.

Specifically (without the transit zone extended to the wAN), if there are >2 (five, for example) sites, and 10 security zones, what happens if:
- Site 5 *only* has workload in zone 9 and 10 running (the firewalls there are only provisioned for zones 9 and 10)
- Sites 1-4 *only* have workload in zones 1-8 running (the firewalls there are only provisioned for zones 1-8)
- And a host in Site-5/Zone-10 needs to communicate with a host in site4/Zone3?

The answer is that they *won't* communicate, unless:
- The zone10 firewall is (wastefully) implemented in site4, and the zone10 VRF is extended across the WAN
- The zone3 firewall is (wastefully) implemented in site5, and the zone3 VRF is extended across the WAN

Extending the transit zone across the WAN, eliminates the unwanted need to provision inter-DC/WAN connectivity for individual security zones to sites that have no workload *in* those security zones.

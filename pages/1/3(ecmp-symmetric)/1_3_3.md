---
l1idx: 1
l2idx: 3
l3idx: 3
title: "The Path Selection Mechanism"
permalink: 1_3_3.html
summary: "In which we stop tap-dancing around and solve the problem"
---

# Recapping
We'll use our last depiction of the graph (pictured below) from the previous section as a starting point.

[![image](./grphth-19.svg){:class="img-fluid"}](./pages/1/3(ecmp-symmetric)/grphth-19.svg){:target="_blank"}

If we want symmetrical paths (or at least, "symmetrical enough" that they hit the same stateful nodes) we need a criteria for path selection that chooses the same edges regardless of which of the two nodes is executing the decision.

As discussed in the preamble, the reason that existing forwarding selection mechanisms (BGP ECMP in this case) don't provide that symmetry is that their algorithms operate on hashes of characteristics of the source and destiation of the traffic, and those values are inverted for the two flows.

# Inverting an inversion?



In the equal-length paths we have to choose from, we previously noted that:
* PathA  has two stateful nodes in site 0.1  (the same site as one of the endpoints -- node 14)
* PathB has two stateful nodes in site 0.3  (the same site as one of the endpoints -- node 22)
* PathC has one stateful node in the same site as each of the endpoints


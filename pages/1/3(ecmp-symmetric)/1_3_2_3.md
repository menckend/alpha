---
l1idx: 1
l2idx: 3
l3idx: 2
l4idx: 3
title: "Back to 'the problem'"
permalink: 1_3_2_3.html
summary: "In which we describe the three 'equal-cost' paths between nodes with differing zone and site properties"
---

##  Where are all the endpoints/workloads/hosts?

At this point, we'll finally acknowledge a non-trivial simplification that has been implicit in all of the topologies discussed up to now.  We have not included any "workload" (aka "non-forwarding"; aka "end-point", aka "host' etc.. ) nodes in our topologies.   The motivation for this omission is a straight-forward desire to reduce visual clutter in the diagrams.  In the "actual" networks that these topologies represent, those nodes on the network/graph are "on" subnets that are originated into BGP by the nodes that *are* represented on the topology-diagram and graph.  When we begin discussing BGP advertisements and propagation, we will use a unique labler for each node as a stand-in for all networks that the BGP router that it represents would originate in an "actual" network.


##  The original problem, illustrated (again)

The following figure illustrates the challenge described in the preamble section of this article, on the formalized graph described in the immediately preceding pages. As previously discussed, in this model, each node on the graph is a BGP router, and each edge represents an eBGP peering between two nodes.

[![image](./grphth-18.svg){:class="img-fluid"}](./grphth-18.svg){:target="_blank"}

The new additions to this figure are the path-tracings between nodes labeled "S0.1 Z0.1" and "S0.0 Z0.3".  

"S*n*.*m*" signifies an index value in the "site" hierarchy ("S").  "*n*" indicates the number of parent/child relationships between the node and the root of the "site" hierarchy (which is equivalent to number of edges between it and the root of the site-tree.)

"Z*n*.*m*" signifies and index value in the "zone" hierarchy ("S").  "*n*" indicates the number of parent/child relationships between the node and the root of the "zone" hierarchy (which is equivalent to number of edges between it and the root of the zone-tree.)


## Paths on the graph; paths on a network

In the preceding figure, three paths have been high-lighted between nodes "S0.1-Z0.1" and "S0.3-Z0.3".  These are the three "shortest" paths between those two nodes, and they are all *equally* short. On our graph, we count the number of edges (6) in the path to determine the "length" of that path.  This represents the AS-path length of the corresponding path in the "real" networks that we are modeling.

As with the scenario in the preamble of this paper, the challenge we have set ourselves is to develop a path *selection* algorithm that results:

>The source/destination-inverted flows of a flow-pair between two nodes with differing zone and site properties will traverse the *same* set of *stateful* nodes as each other.

An important refinement of this problem statement is to qualify it with the following:

>The path selection algorithm must:
> * Execute on each node, selecting the the next edge in the path
>    * Using only the topology data it has received through BGP advertisements and static local configuration/variables as input

(In other words, it has to "act like a routing protocol.")

### Path "a"

* Traverses two stateful nodes in S0.3, one in Z0.1 and one in Z0.3.
* Traverses sites S0.1, S0.3, and S0
* Traverses zones Z0.3, Z0.1, and Z0
* Traverses the following site/zone pairs:
  * S0.1/Z0.1
  * S0  /Z0.1
  * S0.3/Z0.1
  * S0.3/Z0
  * S0.3/Z0.3
  * 


### Path "b"

Traverses two stateful nodes in S0.3, one Z0.1 and one in Z0.3.
Traverses sites S0.1, S0.3, and S0


### Path "c"

Traverses one stateful node in S0.1 (in Z0.1) and one stateful node in S0.3 (in zone 0.3)




